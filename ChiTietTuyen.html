<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Chi tiết tuyến xe</title>
    <link rel="icon" href="images/logo.svg" type="image/x-icon">


    <!-- Bootstrap CSS (CDN) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/ChiTietTuyen.css">
  </head>
  <body>

    <!-- Header -->
    <header class="site-header bg-white shadow-sm">
      <a href="index.html" class="logo-wrap d-flex align-items-center gap-2">
        <img src="images/logo.svg" alt="XeNhanh logo" class="logo">
        <span class="brand-name h5 mb-0">LobiBus</span>
      </a>
      <div class="container d-flex align-items-center justify-content-between py-2">
        <nav class="main-nav d-none d-md-flex" aria-label="Main navigation">
          <a class="nav-link px-3" href="index.html" data-i18n="book">Đặt chuyến</a>
          <a class="nav-link px-3" href="LichTrinh.html" data-i18n="lookup">Lịch trình</a>
          <a class="nav-link px-3" href="TraCuu.html" data-i18n="available">Tra cứu mã đặt vé</a>
          <a class="nav-link px-3" href="trending.html" data-i18n="trending">Chuyến đi đang trend</a>
          <a class="nav-link px-3" href="news.html" data-i18n="news">Tin tức</a>
          <a class="nav-link px-3" href="contact.html" data-i18n="contact">Liên hệ</a>
        </nav>
      </div>
      <div class="actions d-flex align-items-center gap-2">
        <div class="btn-group">
          <button id="lang-btn" type="button" class="btn btn-outline-secondary btn-sm d-flex align-items-center gap-2" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Chuyển ngôn ngữ" style="border-radius: 6px; border-width: 1px; border-style: solid; border-color: #6c757d;">
            <img id="lang-flag" src="images/vietnam-flag.png" alt="Vietnam" style="width: 20px; height: 15px; object-fit: cover;">
            <span id="lang-text">VI</span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><button class="dropdown-item lang-select d-flex align-items-center gap-2" data-lang="vi">Tiếng Việt</button></li>
            <li><button class="dropdown-item lang-select d-flex align-items-center gap-2" data-lang="en">English</button></li>
          </ul>
        </div>
        <button class="btn btn-outline-primary btn-sm d-md-none" id="mobile-menu-toggle">Menu</button>
      </div>
    </header>

    <!-- Main Content -->
    <main>
      <!-- Route Info Section -->
      <section class="route-info container my-4">
        <div class="card p-4 shadow-sm">
          <div class="d-flex align-items-center gap-2 mb-3">
            <a href="LichTrinh.html" class="btn btn-outline-secondary btn-sm">← Quay lại</a>
          </div>
          <!-- Ảnh minh họa cho tuyến (chung card) -->
          <div class="route-thumb mb-3">
            <img id="routeThumbImg" src="images/Screenshot (5).png" alt="Ảnh minh họa tuyến" />
          </div>
          <h2 class="mb-3" id="routeTitle">Tuyến: <span id="routeName">Đang tải...</span></h2>
          <div class="row">
            <div class="col-md-6">
              <strong>Quãng đường:</strong> <span id="distance">-</span>
            </div>
            <div class="col-md-6">
              <strong>Thời gian dự kiến:</strong> <span id="duration">-</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Bus List Section -->
      <section class="bus-list container my-4">
        <div class="row g-4">
          <!-- Left sidebar: filters and sorting -->
          <div class="col-md-4 sticky-filter">
            <!-- Date Filter Card -->
            <div class="card sidebar-card mb-4">
              <div class="card-body">
                <h5 class="card-title mb-3">Chọn ngày khởi hành</h5>
                <div class="row align-items-end">
                  <div class="col-12">
                    <label for="dateFilter" class="form-label">Ngày đi</label>
                    <input type="date" id="dateFilter" class="form-control" min="2025-01-01" max="2025-12-30">
                  </div>
                  <div class="col-12 d-flex gap-2 mt-3 filter-actions">
                    <button id="btnFilterDate" class="btn btn-success flex-fill">Tìm chuyến</button>
                    <button id="btnClearDate" class="btn btn-outline-secondary flex-fill">Xem tất cả</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Sort Options Card -->
            <div class="card sidebar-card">
              <div class="card-body">
                <h5 class="card-title mb-3">Sắp xếp</h5>
                <div class="sort-options">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="sortOption" id="sortDefault" value="default" checked>
                  <label class="form-check-label" for="sortDefault">Mặc định</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="sortOption" id="sortEarly" value="early">
                  <label class="form-check-label" for="sortEarly">Giờ đi sớm nhất</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="sortOption" id="sortLate" value="late">
                  <label class="form-check-label" for="sortLate">Giờ đi muộn nhất</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="sortOption" id="sortRating" value="rating">
                  <label class="form-check-label" for="sortRating">Đánh giá cao nhất</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="sortOption" id="sortPriceAsc" value="priceAsc">
                  <label class="form-check-label" for="sortPriceAsc">Giá tăng dần</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="sortOption" id="sortPriceDesc" value="priceDesc">
                  <label class="form-check-label" for="sortPriceDesc">Giá giảm dần</label>
                </div>
                </div>
              </div>
            </div>

            <!-- Filter Card: Giờ đi, Loại xe, Giá vé, Tiện ích, Đánh giá -->
            <div class="card sidebar-card mt-3">
              <div class="card-body">
                <div class="d-flex align-items-center justify-content-between mb-3">
                  <h5 class="card-title mb-0">Bộ lọc</h5>
                  <a id="filterClearLink" role="button" class="text-primary text-decoration-none">Xóa</a>
                </div>
                <div class="row g-3">
                  <div class="col-12">
                    <div class="d-flex align-items-center justify-content-between">
                      <label class="form-label mb-1">Giờ đi</label>
                      <span id="filterTimeBadge" class="badge rounded-pill text-bg-danger">05:00 - 24:00</span>
                    </div>
                    <div class="range-dual">
                      <input type="range" id="filterTimeMin" class="form-range range-min" min="0" max="1439" step="1">
                      <input type="range" id="filterTimeMax" class="form-range range-max" min="0" max="1439" step="1">
                      <div class="range-track"></div>
                    </div>
                    <div class="d-flex align-items-end gap-2 mt-2">
                      <div class="flex-grow-1">
                        <label class="form-label small mb-1">Từ</label>
                        <input type="text" id="filterTimeMinInput" class="form-control form-control-sm" value="05:00" readonly>
                      </div>
                      <span class="pb-1">-</span>
                      <div class="flex-grow-1">
                        <label class="form-label small mb-1">Đến</label>
                        <input type="text" id="filterTimeMaxInput" class="form-control form-control-sm" value="24:00" readonly>
                      </div>
                    </div>
                  </div>

                  <div class="col-12">
                    <div class="d-flex align-items-center justify-content-between">
                      <label class="form-label mb-0">Tên loại xe</label>
                      <button class="btn btn-sm p-0" type="button" data-bs-toggle="collapse" data-bs-target="#typeCollapse" aria-expanded="false" aria-controls="typeCollapse" style="border: none; background: transparent;">
                        <svg width="16" height="16" fill="currentColor" class="chevron-icon">
                          <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 0 1 0-.708z"/>
                        </svg>
                      </button>
                    </div>
                    <div class="collapse" id="typeCollapse">
                      <div id="filterTypeGroup" class="d-flex flex-column gap-2 mt-2"></div>
                    </div>
                  </div>

                  <div class="col-12">
                    <div class="d-flex align-items-center justify-content-between">
                      <label class="form-label mb-1">Giá vé</label>
                      <span id="filterPriceBadge" class="badge rounded-pill text-bg-light">0 ₫ - 2,000,000 ₫</span>
                    </div>
                    <div class="range-dual">
                      <input type="range" id="filterPriceMin" class="form-range range-min" min="0" max="2000000" step="10000">
                      <input type="range" id="filterPriceMax" class="form-range range-max" min="0" max="2000000" step="10000">
                      <div class="range-track"></div>
                    </div>
                    <div class="d-flex align-items-center justify-content-between small text-muted">
                      <span id="filterPriceMinValue">0 ₫</span>
                      <span id="filterPriceMaxValue">2,000,000 ₫</span>
                    </div>
                  </div>

                  <div class="col-12">
                    <div class="d-flex align-items-center justify-content-between">
                      <label class="form-label mb-0">Tiện ích</label>
                      <button class="btn btn-sm p-0" type="button" data-bs-toggle="collapse" data-bs-target="#amenityCollapse" aria-expanded="false" aria-controls="amenityCollapse" style="border: none; background: transparent;">
                        <svg width="16" height="16" fill="currentColor" class="chevron-icon">
                          <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 0 1 0-.708z"/>
                        </svg>
                      </button>
                    </div>
                    <div class="collapse" id="amenityCollapse">
                      <div class="amenity-checks mt-2">
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="WiFi" id="amenWifi"><label class="form-check-label" for="amenWifi">WiFi</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="Điều hòa" id="amenAC"><label class="form-check-label" for="amenAC">Điều hòa</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="Nước uống" id="amenWater"><label class="form-check-label" for="amenWater">Nước uống</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="Khăn lạnh" id="amenTowel"><label class="form-check-label" for="amenTowel">Khăn lạnh</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="Cổng sạc" id="amenCharge"><label class="form-check-label" for="amenCharge">Cổng sạc</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="TV" id="amenTV"><label class="form-check-label" for="amenTV">TV</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="Chăn gối" id="amenBlanket"><label class="form-check-label" for="amenBlanket">Chăn gối</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="Giường nằm" id="amenSleeper"><label class="form-check-label" for="amenSleeper">Giường nằm</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="Màn che riêng tư" id="amenCurtain"><label class="form-check-label" for="amenCurtain">Màn che riêng tư</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="Ghế massage" id="amenMassage"><label class="form-check-label" for="amenMassage">Ghế massage</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="Rộng rãi" id="amenSpacious"><label class="form-check-label" for="amenSpacious">Rộng rãi</label></div>
                      <div class="form-check"><input class="form-check-input" type="checkbox" value="Cửa USB" id="amenUSB"><label class="form-check-label" for="amenUSB">Cửa USB</label></div>
                      </div>
                    </div>
                  </div>

                  <div class="col-12">
                    <div class="d-flex align-items-center justify-content-between">
                      <label class="form-label mb-1">Đánh giá</label>
                      <span id="filterRatingBadge" class="badge rounded-pill text-bg-danger">4 sao trở lên</span>
                    </div>
                    <div class="rating-options mt-1">
                      <button type="button" class="rating-option-btn d-flex align-items-center gap-2 w-100 border-0 bg-transparent p-2" data-rating="4">
                        <span class="stars" aria-hidden="true">⭐⭐⭐⭐☆</span>
                        <span class="small text-muted">trở lên</span>
                      </button>
                      <button type="button" class="rating-option-btn d-flex align-items-center gap-2 w-100 border-0 bg-transparent p-2" data-rating="3">
                        <span class="stars" aria-hidden="true">⭐⭐⭐☆☆</span>
                        <span class="small text-muted">trở lên</span>
                      </button>
                      <input type="range" id="filterMinRating" class="form-range mt-2" min="0" max="5" step="0.1" aria-label="Đánh giá tối thiểu">
                      <div class="small text-muted mt-1"><span id="filterMinRatingValue">0.0</span> sao trở lên</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Right content: bus list -->
          <div class="col-md-8">
            <div class="card p-4 shadow-sm">
              <h3 class="mb-4">Danh sách các chuyến xe</h3>
              <div id="busList" class="bus-items">
                <!-- Danh sách xe sẽ được thêm động từ JavaScript -->
                <div class="text-center py-4">
                  <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Đang tải...</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="site-footer mt-4">
      <div class="container">
        <div class="row align-items-center py-4">
          <div class="col-12 col-md-6 footer-left">
            <strong style="font-size: 1.5rem;">LobiBus</strong>
            <div class="footer-contact mt-2">
              <div>Địa chỉ: Số 12, Phố Chùa Bộc, Hà Nội</div>
              <div>Hotline: 0936 363 363</div>
              <div>Email: <a href="mailto:info@mountaintravel.vn">info@XeNhanh.vn</a></div>
            </div>
            <div class="d-flex align-items-center gap-3 mt-3">
              <a class="social-icon" href="#" aria-label="Facebook" title="Facebook">
                <img src="images/fb.png" alt="Facebook" class="social-img">
              </a>
              <a class="social-icon" href="#" aria-label="Instagram" title="Instagram">
                <img src="images/ig.png" alt="Instagram" class="social-img">
              </a>
              <a class="social-icon" href="#" aria-label="YouTube" title="YouTube">
                <img src="images/yt.png" alt="YouTube" class="social-img">
              </a>
            </div>
          </div>

          <div class="col-12 col-md-6 d-flex align-items-center justify-content-md-start mt-3 mt-md-0">
            <div class="footer-links">
              <div class="row g-4">
                <div class="col-6">
                  <ul class="list-unstyled">
                    <li class="mb-3"><strong style="font-size: 1.2rem;">Thông tin</strong></li>
                    <li class="mb-2"><a href="#" style="white-space: nowrap;">Chính sách bảo mật</a></li>
                    <li class="mb-2"><a href="#" style="white-space: nowrap;">Điều khoản sử dụng</a></li>
                    <li class="mb-2"><a href="#" style="white-space: nowrap;">Hỗ trợ khách hàng</a></li>
                    <li class="mb-2"><a href="#">Về chúng tôi</a></li>
                  </ul>
                </div>
                <div class="col-6 ps-5">
                  <ul class="list-unstyled">
                    <li class="mb-3"><strong style="font-size: 1.2rem;">Dịch vụ</strong></li>
                    <li class="mb-2"><a href="index.html">Đặt vé xe</a></li>
                    <li class="mb-2"><a href="TraCuu.html" style="white-space: nowrap;">Tra cứu mã đặt vé</a></li>
                    <li class="mb-2"><a href="trending.html" style="white-space: nowrap;">Chuyến đi hot trend</a></li>
                    <li class="mb-2"><a href="contact.html" style="white-space: nowrap;">Liên hệ</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12 text-center py-3 footer-copy">© 2025 xenhanh.com. All rights reserved.</div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap JS bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/index.js"></script>
    <script src="js/ChiTietTuyen.js"></script>
    <!-- Booking drawer overlay + panel -->
    <div id="bookingOverlay" class="drawer-overlay" onclick="closeBookingDrawer()" aria-hidden="true"></div>
    <aside id="bookingDrawer" class="booking-drawer" aria-hidden="true">
      <div class="drawer-header">
        <div class="drawer-title">Chi tiết chọn vé</div>
        <button type="button" class="btn btn-sm btn-light" onclick="closeBookingDrawer()" aria-label="Đóng">✕</button>
      </div>
      <div class="drawer-body">
        <div class="bd-summary">
          <div class="bd-row"><div class="small-muted">Tuyến</div><div id="bdRoute" class="bd-value"></div></div>
          <div class="bd-row"><div class="small-muted">Nhà xe</div><div id="bdBusName" class="bd-value"></div></div>
          <div class="bd-row"><div class="small-muted">Giờ khởi hành</div><div id="bdDeparture" class="bd-value"></div></div>
          <div class="bd-row"><div class="small-muted">Giá vé</div><div id="bdPrice" class="bd-value"></div></div>
        </div>

        <div style="margin-top:14px">
          <div class="small-muted">Số ghế còn lại</div>
          <div id="bdRemaining" class="bd-remaining">-</div>
        </div>

        <div style="margin-top:14px">
          <label for="bdQty" class="form-label small-muted">Số vé muốn mua</label>
          <input id="bdQty" class="form-control qty-input" type="number" min="1" value="1" />
        </div>
      </div>
      <div class="drawer-footer d-flex gap-2">
        <button id="bdConfirm" class="btn-confirm flex-fill" type="button" onclick="confirmBooking()">Xác nhận</button>
        <button class="btn btn-outline-secondary" type="button" onclick="closeBookingDrawer()">Hủy</button>
      </div>
    </aside>
  </body>
</html>
